---
##################################
##################################
## Google Format GitHub Actions ##
##################################
##################################
name: Java Google Format

#
# Documentation:
# https://help.github.com/en/articles/workflow-syntax-for-github-actions
#

#################
# Start the job #
#################
on:
  # Pull request into the master or main branch
  pull_request:
    branches: [master, main]
  # release is created
  release:
    types: [created]


###############
# Set the Job #
###############
jobs:
  formatting:
    # Name the Job
    name: Google Java Formatter
    # Set the agent to run on
    runs-on: ubuntu-latest
    
    ##################
    # Load all steps #
    ##################
    steps:
      - if: github.event_name != 'pull_request'
        uses: actions/checkout@v2
      - if: github.event_name == 'pull_request'
        uses: actions/checkout@v2
        with:
          ref: ${{ github.event.pull_request.head.ref }}
      - uses: axel-op/googlejavaformat-action@v3
        with:
          args: "--skip-removing-unused-imports --replace"
          commitMessage: "Google Java Formatter"